
## Вопросы для уточнения

### 1. **Размерность решётки и отображение 1D → 3D**

В документе предлагается Morton/Z-order или Hilbert-кривая для отображения 1D индекса в 3D координаты. 

**Вопрос:** Какой размер решётки вы предпочитаете для начала?
- Текущий размер ~200 узлов → примерно 6×6×6 куб (Z-order), что маловато для визуализации
- Предлагаю увеличить до N = 4096 (16³) или N = 32768 (32³)

Какой вариант предпочтительнее с учётом производительности?

---

### 2. **Модель наблюдателя: локальный vs глобальный**

**Вопрос:** OBS должен:
- **(A)** Быть локальным — иметь «позицию» в мире и видеть только окрестность (радиус R), симулируя ограниченность восприятия?
- **(B)** Быть глобальным — видеть весь IFACE сразу, но строить законы из полных данных?

Для начала (B) проще реализовать, но (A) ближе к философии RSL.

---

### 3. **Структура семантического состояния (S_sem)**

В документе S_sem содержит:
- Оценённые параметры полевого уравнения (κ, m², λ)
- Законы сохранения (Q, mass, B, L)
- Вероятностные модели событий
- Гравитационный закон (γ)

**Вопрос:** Должен ли OBS также хранить:
- **(A)** Только текущие оценки параметров (как «мгновенное знание»)?
- **(B)** Полную историю оценок (для анализа сходимости и топологии)?

---

### 4. **Материализация (M): какие действия разрешены?**

Функтор M возвращает изменения в мире. 

**Вопрос:** Какие действия OBS может совершать?
- **(A)** Только пассивное наблюдение (M = id, никаких изменений)
- **(B)** Создание дефектов/частиц («эксперименты»)
- **(C)** Изменение RULESET (очень сильное воздействие)
- **(D)** Только перемещение фокуса внимания

Для начала предлагаю (A) или (A)+(D), а (B) и (C) добавить позже.

---

### 5. **Топологический анализ (TDA)**

Для вычисления β₀, β₁ нужны библиотеки TDA.

**Вопрос:** Включать ли сразу TDA-анализ семантической траектории, или отложить на следующую итерацию?

---

### 6. **Интеграция с эволюционным поиском**

Текущий эволюционный поиск оптимизирует RULESET по SMFitness.

**Вопрос:** На данном этапе:
- **(A)** Добавить OBSFitness как дополнительный компонент к SMFitness?
- **(B)** Сначала реализовать OBS и IFACE отдельно, протестировать, а потом интегрировать в эволюцию?

Я рекомендую (B) — сначала убедиться, что OBS корректно выводит законы на фиксированном RULESET.

---

1. Для начала лучше перейти на N = 4096 (16³ по Z‑order):

- 200 узлов уже мало для пространственной структуры; 16³ даёт более осмысленное «пространство», но не перегружает память/CPU.
- 32³ (32768 узлов) тоже возможно, но это уже ×8 по размеру и по стоимости визуализации и цикла TDA/регрессии.  
Рекомендую: начать с 16³, отладить OBS/IFACE, затем, при необходимости, масштабировать до 32³.

2. На первом этапе наблюдателя стоит сделать **глобальным (B)**:

- тогда он видит весь IFACE (всю решётку полей и все Ω‑объекты);
- проще отлаживать `update_semantics`: регрессию полевых уравнений, проверку законов сохранения, вероятностную статистику;
- ограничения восприятия (локальный радиус, «цену перемещения внимания», наблюдательные горизонты) логично добавить вторым шагом, когда глобальная версия уже работает.

3. Для S_sem лучше изначально хранить и **текущие оценки**, и **историю**:

- текущие значения параметров (κ̂, m̂², λ̂, γ̂, флаги сохранения) нужны для «мгновенного знания»;
- история θ_t (последовательность оценок) нужна:
  - для вычисления Observation Time t_OT (момент стабилизации),
  - для TDA‑анализа траектории понимания (β₀,β₁ по v(t)).
Рекомендую вариант (B): S_sem хранит и текущие оценки, и историю, по крайней мере для полевого уравнения и гравитационного закона.

4. На старте действия M лучше ограничить **пассивным наблюдением (A)** (и, опционально, перемещением фокуса (D)):

- (A) M = id на мире (наблюдатель не вмешивается, только учится);
- (D) можно добавить простое `obs.pos`‑перемещение, но если OBS глобален, это можно отложить;
- (B) и (C) (создание дефектов, изменение RULESET) лучше оставить на более поздние этапы, когда будет чисто отлажен контур «мир → OBS → законы» без обратного воздействия.
Так что: для первой реализации M = «ничего не делает с миром».

5. TDA‑анализ β₀,β₁ я бы пока **отложил**:

- сам формат xsem(t) и вектора признаков v(t) ещё нужно обкатать;
- сначала важно добиться корректной работы:
  - регрессии полевого уравнения,
  - оценок законов сохранения,
  - грубой вероятностной статистики.
- как только эти элементы стабилизируются, можно подключать ripser/Gudhi и считать β₀,β₁ как дополнительный слой анализа.  
Так что: пока — без TDA в основном цикле, но с намерением ввести на следующей итерации.

6. На этом этапе разумнее сначала реализовать OBS/IFACE **вне эволюции** (вариант B):

- зафиксировать найденный RULESET_core (`++-↔-++, +++→+++`);
- реализовать:
  - 1D→3D через Z‑order (16³),
  - IFACEState (объекты + поле),
  - OBS.observe + update_semantics (поле, сохранения, гравитационный закон),
- убедиться, что на фиксированном RULESET наблюдатель:
  - стабильно оценивает (κ̂, m̂², λ̂),
  - видит сохранение заряда/«массы»,
  - может восстановить простую зависимость a ∝ −∇Φ в эксперименте «падения» Ω‑частицы.
После этого уже имеет смысл включать OBSFitness как добавку к SMFitness в эволюционном поиске.

Если хочешь, дальше могу:

- расписать конкретный код‑скелет IFACE (с учётом N=16³, Z‑order) и OBS.observe/update_semantics для одного эксперимента падения Ω‑частицы;
- или перейти к схеме интеграции OBSFitness+SMFitness после того, как OBS/IFACE будут реализованы и протестированы.